<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prodigy Custom</title>
    <link rel="stylesheet" href="../style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>
        <script src="https://code.jquery.com/jquery-3.7.0.min.js"
        integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Urbanist:wght@100;400;500&display=swap" rel="stylesheet">

</head>

<body>

    <header>
        <nav class="nav navbar">
            <img class='logo' src="fotologo.png" alt="Imagem logo">
        </nav>
    </header>

    <main>
        <div class="col-md-12 mt-5">
            <div class="d-flex justify-content-center">
                <h2 class="fw-bold mb-5 cad" style="margin-left: 1em;">Faça seu cadastro</h2>
            </div>
            <div class="col-md-12 d-flex flex-row align-items-center justify-content-center">
                <div class="col-md-4">
                    <div class="form-floating mb-4">
                        <input type="text" id="nome" name="nome" class="form-control" placeholder="Nome">
                        <label for="nome">Nome</label>
                    </div>
                    <div class="d-flex justify-content-between">
                        <div class="form-floating mb-4">
                            <input type="text" id="cpf" name="cpf" class="form-control" placeholder="CPF">
                            <label for="nome">CPF</label>
                        </div>
                        <div class="form-floating mb-4">
                            <input type="text" id="telefone" name="telefone" class="form-control"
                                placeholder="Telefone">
                            <label for="telefone">Telefone</label>
                        </div>
                    </div>

                    <div class="d-flex justify-content-between">
                        <div class="form-floating mb-4">
                            <input type="password" id="senha" name="senha" class="form-control" placeholder="Senha">
                            <label for="senha">Senha</label>
                        </div>
                        <div class="form-floating mb-4">
                            <input type="password" id="senhaconfirma" name="senhaconfirma" class="form-control"
                                placeholder="Confirmar senha">
                            <label for="senhaConfirma">Confirmar senha</label>
                        </div>

                    </div>
                    <div class="form-floating mb-4">
                        <input type="text" id="email" name="email" class="form-control" placeholder="Email">
                        <label for="email">Email</label>
                    </div>
                    <div style=" display: flex; justify-content: center; width:100%">
                        <div class="mb-4" style="width: 50%;">
                            <input type="button" id="endereco" name="endereco" class="form-control"
                                value="Adicionar endereço" data-bs-toggle="modal" data-bs-target="#exampleModalCenter">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-12">
            <div class="offset-sm-4 col-sm-4 d-flex justify-content-between">

                <a href="../index.html"><button class="button-primario">Voltar</button></a>

                <button class="button-primario" onclick="cadastrar()">Cadastrar</button>

            </div>
        </div>
        </div>
        </div>
        <div class="modal fade" id="exampleModalCenter" tabindex="-1"
                aria-labelledby="exampleModalCenterTitle" style="display: none;" aria-hidden="true">
                <div class="modal-dialog" style="margin-top:8%">
                    <form action="" method="post" enctype="multipart/form-data">
                        <div class="modal-content">
                            <div class="modal-header fw-bold" style="font-size: 25px;">
                                Adicionar endereço
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body">
                                <div class="col-md-12">
                                    <div class="col-md-12">
                                        <div class="form-floating mb-4">
                                            <input type="text" id="cep" name="cep" class="form-control"
                                                placeholder="CEP">
                                            <label for="cep">CEP</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <div class="row">
                                    <div class="col-md-8">
                                        <div class="form-floating mb-4">
                                            <input type="text" id="rua" name="rua" class="form-control" placeholder="Rua">
                                            <label for="rua">Rua</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-floating mb-4">
                                            <input type="text" id="numero" name="numero" class="form-control" placeholder="Número">
                                            <label for="numero">Número</label>
                                        </div>
                                    </div>
                                </div>
                                </div>
                                <div class="col-md-12">
                                    <div class="row">
                                    <div class="col-md-12">
                                        <div class="form-floating mb-4">
                                            <input type="text" id="bairro" name="bairro" class="form-control" placeholder="Bairro">
                                            <label for="bairro">Bairro</label>
                                        </div>
                                    </div>
                                </div>
                                </div>
                                <div class="col-md-12">
                                    <div class="row">
                                    <div class="col-md-8">
                                        <div class="form-floating mb-4">
                                            <input type="text" id="cidade" name="cidade" class="form-control" placeholder="Cidade">
                                            <label for="cidade">Cidade</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-floating mb-4">
                                            <input type="text" id="estado" name="estado" class="form-control" placeholder="Estado">
                                            <label for="estado">Estado</label>
                                        </div>
                                    </div>
                                </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="submit" id="bd1" style="padding-inline: 2em;" class="btn button-primario"
                                    name="submit-btn">
                                    Salvar
                                </button>
                            </div>
                    </form>
                </div>
            </div>
    </main>

</body>
<script>
    $(function(){
    function cadastrar() {
        var N = document.getElementById("nome").value;
        var C = document.getElementById("cpf").value;
        var EM = document.getElementById("email").value;
        var S = document.getElementById("senha").value;
        var SC = document.getElementById("senhaconfirma").value;
        var T = document.getElementById("telefone").value;

        var CEP = document.getElementById("cep").value;
        var rua = document.getElementById("rua").value;
        var numero = document.getElementById("numero").value;
        var bairro = document.getElementById("bairro").value;
        var cidade = document.getElementById("cidade").value;
        var estado = document.getElementById("estado").value;
        window.open("../php/cadastrar.php?N=" + N + "&C=" + C + "&EM=" + EM + "&S=" + S + "&SC=" + SC + "&T=" + T +
        "&cep=" + CEP + "&rua=" + rua + "&numero=" + numero + "&bairro" + bairro + "&cidade=" + cidade + "&estado=" + estado ,"_self");
    }
    
    function limpa_formulário_cep() {
                // Limpa valores do formulário de cep.
                $("#rua").val("");
                $("#bairro").val("");
                $("#cidade").val("");
                $("#estado").val("");
            }
            
            //Quando o campo cep perde o foco.
            $("#cep").blur(function() {

                //Nova variável "cep" somente com dígitos.
                var cep = $(this).val().replace(/\D/g, '');

                //Verifica se campo cep possui valor informado.
                if (cep != "") {

                    //Expressão regular para validar o CEP.
                    var validacep = /^[0-9]{8}$/;

                    //Valida o formato do CEP.
                    if(validacep.test(cep)) {

                        //Preenche os campos com "..." enquanto consulta webservice.
                        $("#rua").val("...");
                        $("#bairro").val("...");
                        $("#cidade").val("...");
                        $("#estado").val("...");

                        //Consulta o webservice viacep.com.br/
                        $.getJSON("https://viacep.com.br/ws/"+ cep +"/json/?callback=?", function(dados) {

                            if (!("erro" in dados)) {
                                //Atualiza os campos com os valores da consulta.
                                $("#rua").val(dados.logradouro);
                                $("#bairro").val(dados.bairro);
                                $("#cidade").val(dados.localidade);
                                $("#estado").val(dados.uf);
                            } //end if.
                            else {
                                //CEP pesquisado não foi encontrado.
                                limpa_formulário_cep();
                                alert("CEP não encontrado.");
                            }
                        });
                    } //end if.
                    else {
                        //cep é inválido.
                        limpa_formulário_cep();
                        alert("Formato de CEP inválido.");
                    }
                } //end if.
                else {
                    //cep sem valor, limpa formulário.
                    limpa_formulário_cep();
                }
            });
})
</script>

</html>